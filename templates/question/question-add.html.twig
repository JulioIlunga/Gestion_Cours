{% extends 'template.html.twig' %}

{% block body %}
    <h1>Cr√©er une nouvelle question</h1>
    
    {{ form_start(form) }}

    <div class="form-group">
        {{ form_row(form.evaluations) }}
    </div>
    <div class="form-group">
        {{ form_row(form.enonce_question) }}
    </div>
    <div class="form-group">
        {{ form_row(form.type) }}
    </div>

    <!-- Conteneur des assertions -->
    <div class="form-group" id="assertions-container">
        {{ form_row(form.assertions) }}
    </div>

    <div class="form-group">
        {{ form_widget(form.Enregistrer, {'attr': {'class': 'btn btn-primary'}}) }}
    </div>

    {{ form_end(form) }}
    <script>
    document.addEventListener('DOMContentLoaded', function() {
    const collectionHolder = document.querySelector('#form_assertions');
    const addButton = document.querySelector('.add_assertion');

    addButton.addEventListener('click', function(e) {
        e.preventDefault();
        const newAssertion = collectionHolder.dataset.proto.replace(/__name__/g, collectionHolder.children.length);
        collectionHolder.insertAdjacentHTML('beforeend', newAssertion);
    });

    collectionHolder.addEventListener('click', function(e) {
        if (e.target.classList.contains('remove_assertion')) {
            e.preventDefault();
            e.target.closest('.assertion').remove();
        }
    });
});
    </script>
{% endblock %}
